<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å“ä¿¡ã€‚å»ºç¯‰ã€‚ç©ºé–“è¨­è¨ˆ - 3Dæ•ˆæœåœ–ä½œå“å±•ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background-color: #ffffff;
            color: #333333;
            line-height: 1.6;
            min-width: 1200px; /* ç¢ºä¿æ¡Œé¢ç‰ˆæœ€å°å¯¬åº¦ */
        }

        /* é ‚éƒ¨å°èˆªåˆ— */
        .header {
            background: #fff;
            border-bottom: 1px solid #e5e5e5;
            padding: 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2c3e50;
            text-decoration: none;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 40px;
        }

        .nav-menu a {
            text-decoration: none;
            color: #555;
            font-weight: 500;
            font-size: 1rem;
            padding: 8px 0;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .nav-menu a:hover,
        .nav-menu a.active {
            color: #3498db;
            border-bottom-color: #3498db;
        }

        /* é é¢æ¨™é¡Œå€ */
        .page-header {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 60px 0;
            text-align: center;
        }

        .page-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .page-subtitle {
            font-size: 1.2rem;
            color: #6c757d;
            max-width: 600px;
            margin: 0 auto;
        }

        /* ç¯©é¸å™¨å€åŸŸ */
        .filter-section {
            background: #fff;
            padding: 30px 0;
            border-bottom: 1px solid #e5e5e5;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
        }

        .filter-tabs {
            display: flex;
            justify-content: center;
            gap: 0;
            margin-bottom: 20px;
        }

        .filter-tab {
            background: none;
            border: 1px solid #dee2e6;
            padding: 12px 24px;
            font-size: 1rem;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.3s ease;
            border-right: none;
        }

        .filter-tab:first-child {
            border-top-left-radius: 6px;
            border-bottom-left-radius: 6px;
        }

        .filter-tab:last-child {
            border-top-right-radius: 6px;
            border-bottom-right-radius: 6px;
            border-right: 1px solid #dee2e6;
        }

        .filter-tab.active,
        .filter-tab:hover {
            background: #3498db;
            color: #fff;
            border-color: #3498db;
        }

        .filter-info {
            text-align: center;
            color: #6c757d;
            font-size: 0.95rem;
        }

        /* ä½œå“ç¶²æ ¼ */
        .portfolio-grid {
            padding: 40px 0 80px;
            background: #fafafa;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
        }

        .portfolio-item {
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .portfolio-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .portfolio-image {
            width: 100%;
            height: 220px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            position: relative;
            overflow: hidden;
        }

        .portfolio-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="dots" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="%23ddd"/></pattern></defs><rect width="100" height="100" fill="url(%23dots)"/></svg>');
            opacity: 0.3;
        }

        .image-placeholder {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #999;
            font-size: 0.9rem;
            text-align: center;
        }

        .portfolio-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(52, 152, 219, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .portfolio-item:hover .portfolio-overlay {
            opacity: 1;
        }

        .play-button {
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #3498db;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .play-button:hover {
            background: #fff;
            transform: scale(1.1);
        }

        .portfolio-info {
            padding: 20px;
        }

        .portfolio-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .portfolio-category {
            color: #6c757d;
            font-size: 0.9rem;
            margin-bottom: 12px;
        }

        .portfolio-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        /* 3Dç€è¦½å™¨æ¨¡æ…‹æ¡† */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.95);
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            position: relative;
            margin: 2% auto;
            width: 90%;
            height: 90%;
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 10px 50px rgba(0,0,0,0.3);
        }

        .modal-header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: #fff;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #34495e;
        }

        .modal-title {
            font-size: 1.4rem;
            font-weight: 600;
        }

        .modal-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .control-button {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: #fff;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            background: rgba(255,255,255,0.2);
        }

        .close-btn {
            background: none;
            border: none;
            color: #fff;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background 0.3s ease;
            line-height: 1;
        }

        .close-btn:hover {
            background: rgba(255,255,255,0.1);
        }

        .iframe-container {
            width: 100%;
            height: calc(100% - 81px);
            position: relative;
            background: #f8f9fa;
        }

        .iframe-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-size: 1.1rem;
            text-align: center;
            padding: 40px;
        }

        .placeholder-icon {
            font-size: 4rem;
            margin-bottom: 30px;
            color: #dee2e6;
        }

        .placeholder-title {
            font-size: 1.5rem;
            color: #495057;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .placeholder-description {
            max-width: 500px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .placeholder-code {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: #6f42c1;
            margin: 15px 0;
        }

        .twinmotion-iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: none;
        }

        /* è¼‰å…¥å‹•ç•« */
        .loading-spinner {
            display: inline-block;
            width: 30px;
            height: 30px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* éŸ¿æ‡‰å¼èª¿æ•´ - åƒ…é‡å°å¤§å±å¹• */
        @media (min-width: 1600px) {
            .grid-container {
                grid-template-columns: repeat(5, 1fr);
                max-width: 1600px;
            }
        }

        @media (max-width: 1400px) {
            .grid-container {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* å´é‚Šä¿¡æ¯é¢æ¿ */
        .info-panel {
            position: fixed;
            right: -350px;
            top: 0;
            width: 350px;
            height: 100vh;
            background: #fff;
            box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            transition: right 0.3s ease;
            z-index: 1500;
            overflow-y: auto;
        }

        .info-panel.open {
            right: 0;
        }

        .info-panel-header {
            padding: 20px;
            border-bottom: 1px solid #e5e5e5;
            background: #f8f9fa;
        }

        .info-panel-content {
            padding: 20px;
        }
    </style>
</head>
<body>
    <!-- é ‚éƒ¨å°èˆª -->
    <header class="header">
        <div class="nav-container">
            <a href="#" class="logo">å“ä¿¡ã€‚å»ºç¯‰ã€‚ç©ºé–“è¨­è¨ˆ</a>
            <nav>
                <ul class="nav-menu">
                    <li><a href="#" class="active">3Dä½œå“å±•ç¤º</a></li>
                    <li><a href="#">ç‡Ÿé€ å·¥ç¨‹</a></li>
                    <li><a href="#">å®¤å…§è¨­è¨ˆ</a></li>
                    <li><a href="#">é—œæ–¼æˆ‘å€‘</a></li>
                    <li><a href="#">è¯çµ¡æˆ‘å€‘</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- é é¢æ¨™é¡Œ -->
    <section class="page-header">
        <div class="container">
            <h1 class="page-title">3Dæ•ˆæœåœ–ä½œå“å±•ç¤º</h1>
            <p class="page-subtitle">æ¢ç´¢æˆ‘å€‘çš„å°ˆæ¥­ç‡Ÿé€ èˆ‡å®¤å…§è¨­è¨ˆä½œå“ï¼Œé«”é©—æ²‰æµ¸å¼çš„3Däº’å‹•ç€è¦½</p>
        </div>
    </section>

    <!-- ç¯©é¸å™¨ -->
    <section class="filter-section">
        <div class="container">
            <div class="filter-tabs">
                <button class="filter-tab active" data-category="all">å…¨éƒ¨ä½œå“</button>
                <button class="filter-tab" data-category="residential">ä½å®…è¨­è¨ˆ</button>
                <button class="filter-tab" data-category="commercial">å•†æ¥­ç©ºé–“</button>
                <button class="filter-tab" data-category="construction">ç‡Ÿé€ å·¥ç¨‹</button>
                <button class="filter-tab" data-category="renovation">èˆŠå±‹ç¿»æ–°</button>
            </div>
            <div class="filter-info">
                <span id="project-count">36</span> å€‹å°ˆæ¡ˆä½œå“ | æ”¯æ´ Twinmotion 3D äº’å‹•ç€è¦½
            </div>
        </div>
    </section>

    <!-- ä½œå“ç¶²æ ¼ -->
    <section class="portfolio-grid">
        <div class="grid-container" id="portfolio-grid">
            <!-- å‹•æ…‹ç”Ÿæˆçš„ä½œå“é …ç›®å°‡æ’å…¥é€™è£¡ -->
        </div>
    </section>

    <!-- 3Dç€è¦½å™¨æ¨¡æ…‹æ¡† -->
    <div id="viewer-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-title">3Dä½œå“ç€è¦½</h3>
                <div class="modal-controls">
                    <button class="control-button" onclick="toggleFullscreen()">ğŸ”³ å…¨è¢å¹•</button>
                    <button class="control-button" onclick="resetView()">ğŸ”„ é‡ç½®è¦–è§’</button>
                    <button class="control-button" onclick="showInfo()">â„¹ï¸ å°ˆæ¡ˆè³‡è¨Š</button>
                    <button class="close-btn" onclick="close3DViewer()">&times;</button>
                </div>
            </div>
            <div class="iframe-container">
                <iframe id="twinmotion-iframe" class="twinmotion-iframe" frameborder="0" allowfullscreen></iframe>
                
                <div id="iframe-placeholder" class="iframe-placeholder">
                    <div class="placeholder-icon">ğŸ®</div>
                    <h3 class="placeholder-title">Twinmotion 3D é«”é©—</h3>
                    <p class="placeholder-description">
                        æ­¤å€åŸŸå°‡é¡¯ç¤ºæ‚¨çš„ Twinmotion 3D äº’å‹•å…§å®¹ã€‚<br>
                        è«‹å°‡å°å‡ºçš„ HTML æª”æ¡ˆ URL è¨­å®šåˆ°å°æ‡‰çš„å°ˆæ¡ˆé…ç½®ä¸­ã€‚
                    </p>
                    <div class="placeholder-code">
                        twinmotionUrls['project_id'] = 'YOUR_TWINMOTION_URL'
                    </div>
                    <div class="loading-spinner"></div>
                    <p style="margin-top: 15px; color: #28a745; font-weight: 600;">
                        ğŸ’¡ è¨­å®šå®Œæˆå¾Œå³å¯äº«å—å®Œæ•´çš„ 3D äº’å‹•é«”é©—
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- å°ˆæ¡ˆè³‡è¨Šå´é‚Šé¢æ¿ -->
    <div id="info-panel" class="info-panel">
        <div class="info-panel-header">
            <h4>å°ˆæ¡ˆè©³ç´°è³‡è¨Š</h4>
            <button onclick="closeInfoPanel()" style="background:none;border:none;font-size:1.2rem;cursor:pointer;">&times;</button>
        </div>
        <div class="info-panel-content" id="info-panel-content">
            <!-- å°ˆæ¡ˆè©³ç´°è³‡è¨Šå°‡åœ¨é€™è£¡é¡¯ç¤º -->
        </div>
    </div>

    <script>
        // å°ˆæ¡ˆæ•¸æ“š - æ‚¨å¯ä»¥åœ¨é€™è£¡æ·»åŠ æ›´å¤šå°ˆæ¡ˆ
        const projectsData = [
            {
                id: 'modern_house_01',
                title: 'ç¾ä»£åˆ¥å¢…è¨­è¨ˆæ¡ˆä¾‹',
                category: 'residential',
                description: 'çµåˆç¾ä»£ç°¡ç´„ç¾å­¸èˆ‡æ™ºèƒ½å®¶å±…æŠ€è¡“çš„è±ªè¯ä½å®…è¨­è¨ˆ',
                tags: ['ç¾ä»£é¢¨æ ¼', 'Twinmotion', 'åˆ¥å¢…è¨­è¨ˆ'],
                twinmotionUrl: '', // åœ¨é€™è£¡è¨­å®š Twinmotion URL
                details: {
                    area: '450åª',
                    location: 'å°åŒ—å¸‚ä¿¡ç¾©å€',
                    year: '2024',
                    style: 'ç¾ä»£ç°¡ç´„'
                }
            },
            {
                id: 'office_design_01',
                title: 'ä¼æ¥­ç¸½éƒ¨è¾¦å…¬ç©ºé–“',
                category: 'commercial',
                description: 'èåˆä¼æ¥­æ–‡åŒ–èˆ‡ç¾ä»£è¾¦å…¬éœ€æ±‚çš„å‰µæ–°ç©ºé–“è¨­è¨ˆ',
                tags: ['å•†æ¥­ç©ºé–“', 'BIMæ¨¡å‹', 'è¾¦å…¬è¨­è¨ˆ'],
                twinmotionUrl: '',
                details: {
                    area: '1200åª',
                    location: 'å°åŒ—å¸‚å…§æ¹–å€',
                    year: '2024',
                    style: 'ç¾ä»£å•†å‹™'
                }
            },
            {
                id: 'residential_complex',
                title: 'ä½å®…å¤§æ¨“å»ºç¯‰å·¥ç¨‹',
                category: 'construction',
                description: 'æ¡ç”¨BIMæŠ€è¡“çš„ç¾ä»£ä½å®…å»ºç¯‰ç‡Ÿé€ å°ˆæ¡ˆ',
                tags: ['ç‡Ÿé€ å·¥ç¨‹', 'Revit', 'ä½å®…å»ºç¯‰'],
                twinmotionUrl: '',
                details: {
                    area: '15000åª',
                    location: 'æ–°åŒ—å¸‚æ¿æ©‹å€',
                    year: '2023-2024',
                    style: 'ç¾ä»£å»ºç¯‰'
                }
            },
            {
                id: 'renovation_project',
                title: 'è€å®…ç¿»æ–°æ”¹é€ æ¡ˆä¾‹',
                category: 'renovation',
                description: 'ä¿ç•™æ­·å²éŸ»å‘³çš„è€å®…å…¨é¢ç¿»æ–°è¨­è¨ˆ',
                tags: ['èˆŠå±‹ç¿»æ–°', 'å¤è¹Ÿä¿®å¾©', 'æ°¸çºŒè¨­è¨ˆ'],
                twinmotionUrl: '',
                details: {
                    area: '80åª',
                    location: 'å°å—å¸‚ä¸­è¥¿å€',
                    year: '2024',
                    style: 'å¤å…¸ç¾ä»£'
                }
            }
        ];

        // è¤‡è£½é …ç›®ä»¥å‰µå»ºæ›´å¤šå±•ç¤ºå…§å®¹
        const allProjects = [];
        for (let i = 0; i < 9; i++) {
            projectsData.forEach((project, index) => {
                allProjects.push({
                    ...project,
                    id: `${project.id}_${i}_${index}`,
                    title: `${project.title} ${String.fromCharCode(65 + i)}${index + 1}`
                });
            });
        }

        // Twinmotion URL é…ç½® - åœ¨é€™è£¡è¨­å®šæ‚¨çš„ Twinmotion ç¶²å€
        const twinmotionUrls = {};
        allProjects.forEach(project => {
            twinmotionUrls[project.id] = 'https://twinmotion.unrealengine.com/presentation/c3HkKdCRIf3HfHvI'; // è«‹å°‡å°æ‡‰çš„ Twinmotion URL å¡«å…¥é€™è£¡
        });

        // æ¸²æŸ“å°ˆæ¡ˆç¶²æ ¼
        function renderProjects(projects = allProjects) {
            const grid = document.getElementById('portfolio-grid');
            grid.innerHTML = '';

            projects.forEach(project => {
                const projectItem = document.createElement('div');
                projectItem.className = 'portfolio-item';
                projectItem.setAttribute('data-category', project.category);
                
                projectItem.innerHTML = `
                    <div class="portfolio-image">
                        <div class="image-placeholder">
                            ğŸ–¼ï¸<br>ä½œå“é è¦½åœ–<br><small>${project.category}</small>
                        </div>
                        <div class="portfolio-overlay">
                            <button class="play-button">â–¶</button>
                        </div>
                    </div>
                    <div class="portfolio-info">
                        <h3 class="portfolio-title">${project.title}</h3>
                        <p class="portfolio-category">${getCategoryName(project.category)}</p>
                        <div class="portfolio-tags">
                            ${project.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                    </div>
                `;

                projectItem.addEventListener('click', () => open3DViewer(project));
                grid.appendChild(projectItem);
            });

            // æ›´æ–°å°ˆæ¡ˆè¨ˆæ•¸
            document.getElementById('project-count').textContent = projects.length;
        }

        // åˆ†é¡åç¨±è½‰æ›
        function getCategoryName(category) {
            const names = {
                'residential': 'ä½å®…è¨­è¨ˆ',
                'commercial': 'å•†æ¥­ç©ºé–“',
                'construction': 'ç‡Ÿé€ å·¥ç¨‹',
                'renovation': 'èˆŠå±‹ç¿»æ–°'
            };
            return names[category] || 'å…¶ä»–';
        }

        // ç¯©é¸åŠŸèƒ½
        function setupFilters() {
            const filterTabs = document.querySelectorAll('.filter-tab');
            
            filterTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // æ›´æ–°æ´»å‹•æ¨™ç±¤
                    filterTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');

                    // ç¯©é¸å°ˆæ¡ˆ
                    const category = tab.getAttribute('data-category');
                    let filteredProjects;

                    if (category === 'all') {
                        filteredProjects = allProjects;
                    } else {
                        filteredProjects = allProjects.filter(project => project.category === category);
                    }

                    renderProjects(filteredProjects);
                });
            });
        }

        // é–‹å•Ÿ3Dç€è¦½å™¨
        function open3DViewer(project) {
            const modal = document.getElementById('viewer-modal');
            const modalTitle = document.getElementById('modal-title');
            const iframe = document.getElementById('twinmotion-iframe');
            const placeholder = document.getElementById('iframe-placeholder');
            
            modalTitle.textContent = `${project.title} - 3Däº’å‹•ç€è¦½`;
            
            // æª¢æŸ¥æ˜¯å¦æœ‰è¨­å®šå°æ‡‰çš„ Twinmotion URL
            const twinmotionUrl = twinmotionUrls[project.id] || project.twinmotionUrl;
            
            if (twinmotionUrl && twinmotionUrl.trim() !== '') {
                // è¼‰å…¥ iframe
                iframe.src = twinmotionUrl;
                iframe.style.display = 'block';
                placeholder.style.display = 'none';
            } else {
                // é¡¯ç¤ºè¨­å®šèªªæ˜
                iframe.style.display = 'none';
                placeholder.style.display = 'flex';
                
                placeholder.innerHTML = `
                    <div class="placeholder-icon">ğŸ®</div>
                    <h3 class="placeholder-title">${project.title}</h3>
                    <p class="placeholder-description">
                        ${project.description}<br><br>
                        æ­¤å°ˆæ¡ˆçš„ Twinmotion 3D é«”é©—å°šæœªè¨­å®šï¼Œè«‹åœ¨ç¨‹å¼ç¢¼ä¸­è¨­å®šå°æ‡‰çš„ URL
                    </p>
                    <div class="placeholder-code">
                        twinmotionUrls['${project.id}'] = 'YOUR_TWINMOTION_URL'
                    </div>
                    <div class="loading-spinner"></div>
                    <p style="margin-top: 15px; color: #28a745; font-weight: 600;">
                        ğŸ’¡ è¨­å®šå®Œæˆå¾Œå³å¯é«”é©—å®Œæ•´çš„ 3D äº’å‹•ç€è¦½åŠŸèƒ½
                    </p>
                `;
            }
            
            // é¡¯ç¤ºæ¨¡æ…‹æ¡†
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            
            // å„²å­˜ç•¶å‰å°ˆæ¡ˆè³‡è¨Šä¾›å…¶ä»–åŠŸèƒ½ä½¿ç”¨
            window.currentProject = project;
        }

        // é—œé–‰3Dç€è¦½å™¨
        function close3DViewer() {
            const modal = document.getElementById('viewer-modal');
            const iframe = document.getElementById('twinmotion-iframe');
            
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            iframe.src = '';
            
            // é—œé–‰è³‡è¨Šé¢æ¿
            closeInfoPanel();
        }

        // å…¨è¢å¹•åˆ‡æ›
        function toggleFullscreen() {
            const modalContent = document.querySelector('.modal-content');
            
            if (!document.fullscreenElement) {
                modalContent.requestFullscreen().catch(err => {
                    console.log('å…¨è¢å¹•è«‹æ±‚å¤±æ•—:', err);
                });
            } else {
                document.exitFullscreen();
            }
        }

        // é‡ç½®è¦–è§’ (é‡å°æ”¯æ´çš„3Då…§å®¹)
        function resetView() {
            const iframe = document.getElementById('twinmotion-iframe');
            if (iframe.style.display === 'block') {
                // é‡æ–°è¼‰å…¥iframeä»¥é‡ç½®è¦–è§’
                const currentSrc = iframe.src;
                iframe.src = '';
                setTimeout(() => {
                    iframe.src = currentSrc;
                }, 100);
            }
        }

        // é¡¯ç¤ºå°ˆæ¡ˆè³‡è¨Š
        function showInfo() {
            if (!window.currentProject) return;
            
            const panel = document.getElementById('info-panel');
            const content = document.getElementById('info-panel-content');
            const project = window.currentProject;
            
            content.innerHTML = `
                <h4 style="margin-bottom: 20px; color: #2c3e50;">${project.title}</h4>
                
                <div style="margin-bottom: 25px;">
                    <h5 style="color: #6c757d; margin-bottom: 10px;">å°ˆæ¡ˆæè¿°</h5>
                    <p style="line-height: 1.6;">${project.description}</p>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <h5 style="color: #6c757d; margin-bottom: 15px;">å°ˆæ¡ˆè³‡è¨Š</h5>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9rem;">
                        <div><strong>é¢ç©ï¼š</strong>${project.details.area}</div>
                        <div><strong>åœ°é»ï¼š</strong>${project.details.location}</div>
                        <div><strong>å¹´ä»½ï¼š</strong>${project.details.year}</div>
                        <div><strong>é¢¨æ ¼ï¼š</strong>${project.details.style}</div>
                    </div>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <h5 style="color: #6c757d; margin-bottom: 10px;">æŠ€è¡“æ¨™ç±¤</h5>
                    <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                        ${project.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <h5 style="color: #6c757d; margin-bottom: 10px;">å°ˆæ¡ˆç‰¹è‰²</h5>
                    <ul style="line-height: 1.6; padding-left: 20px;">
                        <li>æ¡ç”¨æœ€æ–°BIMå»ºç¯‰è³‡è¨Šå»ºæ¨¡æŠ€è¡“</li>
                        <li>3Dè¦–è¦ºåŒ–è¨­è¨ˆé©—è­‰èˆ‡æºé€š</li>
                        <li>ç²¾ç¢ºçš„å·¥ç¨‹é‡è¨ˆç®—èˆ‡æˆæœ¬æ§åˆ¶</li>
                        <li>å¤šå°ˆæ¥­å”åŒä½œæ¥­æ•´åˆ</li>
                    </ul>
                </div>
                
                <div style="padding: 15px; background: #f8f9fa; border-radius: 6px; margin-top: 30px;">
                    <h6 style="color: #495057; margin-bottom: 10px;">ğŸ’¡ äº’å‹•æ“ä½œæç¤º</h6>
                    <ul style="font-size: 0.85rem; color: #6c757d; line-height: 1.5; margin: 0; padding-left: 20px;">
                        <li>æ»‘é¼ æ‹–æ‹½ï¼šæ—‹è½‰è¦–è§’</li>
                        <li>æ»¾è¼ªï¼šç¸®æ”¾è¦–åœ–</li>
                        <li>WASDéµï¼šç§»å‹•è¦–é»</li>
                        <li>å³éµï¼šé‡ç½®è¦–è§’</li>
                    </ul>
                </div>
            `;
            
            panel.classList.add('open');
        }

        // é—œé–‰è³‡è¨Šé¢æ¿
        function closeInfoPanel() {
            const panel = document.getElementById('info-panel');
            panel.classList.remove('open');
        }

        // é»æ“Šæ¨¡æ…‹æ¡†èƒŒæ™¯é—œé–‰
        document.getElementById('viewer-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                close3DViewer();
            }
        });

        // éµç›¤å¿«æ·éµ
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                close3DViewer();
            } else if (e.key === 'F11') {
                e.preventDefault();
                toggleFullscreen();
            } else if (e.key === 'i' || e.key === 'I') {
                if (document.getElementById('viewer-modal').style.display === 'block') {
                    showInfo();
                }
            }
        });

        // é é¢è¼‰å…¥å®Œæˆåˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            renderProjects();
            setupFilters();
            
            console.log('å“ä¿¡å·¥å‹™ 3Då±•ç¤ºé é¢å·²è¼‰å…¥');
            console.log('ç¸½å…±', allProjects.length, 'å€‹å°ˆæ¡ˆä½œå“');
            console.log('è«‹åœ¨ twinmotionUrls ç‰©ä»¶ä¸­è¨­å®šæ‚¨çš„ Twinmotion 3D HTML ç¶²å€');
            
            // é è¼‰å…¥ä¸€äº›ç¤ºä¾‹æ•¸æ“šæç¤º
            console.log('ç¯„ä¾‹è¨­å®šï¼š');
            console.log('twinmotionUrls["modern_house_01_0_0"] = "https://your-twinmotion-url.com/project1.html";');
        });

        // å¹³æ»‘æ»¾å‹•åˆ°ä½œå“å€åŸŸ
        function scrollToPortfolio() {
            document.querySelector('.portfolio-grid').scrollIntoView({
                behavior: 'smooth'
            });
        }

        // æœå°‹åŠŸèƒ½ (å¯é¸æ“´å±•)
        function searchProjects(keyword) {
            const filtered = allProjects.filter(project => 
                project.title.toLowerCase().includes(keyword.toLowerCase()) ||
                project.description.toLowerCase().includes(keyword.toLowerCase()) ||
                project.tags.some(tag => tag.toLowerCase().includes(keyword.toLowerCase()))
            );
            renderProjects(filtered);
        }

        // æ·»åŠ æœå°‹æ¡†äº‹ä»¶ç›£è½ (å¦‚æœéœ€è¦çš„è©±)
        // const searchInput = document.getElementById('search-input');
        // if (searchInput) {
        //     searchInput.addEventListener('input', (e) => {
        //         searchProjects(e.target.value);
        //     });
        // }
    </script>
</body>
</html>